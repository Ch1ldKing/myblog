---
title: 使用 MLX 在 Apple M 芯片进行 Lora 微调
date: 2025-10-28T22:22:36+08:00
lastmod: 2025-10-28T22:22:36+08:00
tags:
  - problem
author: Dorianyang
draft: false
showToc: true
TocOpen: false
hidemeta: false
comments: true
disableHLJS: false
disableShare: false
hideSummary: false
searchHidden: false
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
ShowWordCount: true
ShowRssButtonInSectionTermList: true
UseHugoToc: true
---
# 数据准备
1. 从 github 克隆 Apple 给出的示例项目项目
   `git clone https://github.com/ml-explore/mlx-examples.git`
2. 在项目`lora/data/`中放置你的训练、验证和测试集数据![CleanShot 2025-10-29 at 00.15.26@2x.png](https://s2.loli.net/2025/10/29/lpLI4gCXmvcq1Uk.png)
3. 下载一个模型。此处我们从`modelscope`下载一个小模型`minimind2`
```zsh
pip install modelscope
modelscope download --model gongjy/MiniMind2
```
4. 下载后，记住模型的路径。此处我的路径如下![CleanShot 2025-10-29 at 00.18.56@2x.png](https://s2.loli.net/2025/10/29/AMzUcXeZ1dSrPIG.png)
# 环境配置
1. 使用 uv 初始化一个环境。
```zsh
$ uv init --name mlx . -p3.13 
Initialized project `hypollm` at `/Users/dorian/Documents/Programme/NUS311/model_test`
```
2. 你也可以使用`conda`
```zsh
$ conda create -n mlx python==3.13
```
3. 
```zsh
$ uv add mlx-lm, transformers, torch, numpy
```

```zsh
$ mlx_lm.lora --model /Users/dorian/.cache/modelscope/hub/models/gongjy/MiniMind2 --train --data ./data
Loading pretrained model
Loading datasets
Training
Trainable parameters: 1.654% (1.720M/104.031M)
Starting training..., iters: 1000
Calculating loss...: 100%|██| 25/25 [00:07<00:00,  3.42it/s]
```
