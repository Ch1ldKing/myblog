---
title: 模型训练踩坑合集
date: 2025-10-28T11:55:22+08:00
lastmod: 2025-10-28T11:55:22+08:00
tags:
  - problem
author: Dorianyang
draft: false
showToc: true
TocOpen: false
hidemeta: false
comments: true
disableHLJS: false
disableShare: false
hideSummary: false
searchHidden: false
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
ShowWordCount: true
ShowRssButtonInSectionTermList: true
UseHugoToc: true
---
确定模型层数
```zsh
python -c "import torch; ckpt = torch.load('full_sft_512.pth', map_location='cpu'); print('模型键:', ckpt.keys() if isinstance(ckpt, dict) else 'direct tensor'); print('\n层数统计:'); [print(k) for k in (ckpt.keys() if isinstance(ckpt, dict) else [])]"
```

50 系显卡 cuda 和 pytorch 不兼容问题，升级到最新 cu129
```zsh
pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu129
```